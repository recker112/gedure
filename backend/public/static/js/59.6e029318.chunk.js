(this["webpackJsonpfrontend-la-candelaria"]=this["webpackJsonpfrontend-la-candelaria"]||[]).push([[59,63],{1296:function(a,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return f}));var r=t(26),n=t(54),s=t.n(n),i=t(68),c=t(38),o=t(0),l=t(228),d=t(987),u=t(109),p=t(14),j=t(296),b=t(302),v=t(1);function f(){var a,e=Object(o.useState)(0),t=Object(c.a)(e,2),n=t[0],f=t[1],h=Object(p.d)((function(a){return{loading:a.forms.updateAvatar.loading,data:a.forms.updateAvatar.data,user:a.userData.user,permissions:a.userData.permissions}})),m=h.user,g=h.loading,O=h.data,x=h.permissions,y=Object(p.c)(),A=Object(u.a)().fetchData,C=Object(o.useCallback)((function(a){var e=Math.round(100*a.loaded/a.total);f(e)}),[]);Object(o.useEffect)((function(){var a=function(){var a=Object(i.a)(s.a.mark((function a(){var e,t,r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return y(Object(j.a)("updateAvatar",!0)),e=new FormData,"delete"===O.avatar?e.append("delete_avatar",!0):e.append("avatar",O.avatar),e.append("_method","PUT"),t={url:"v1/user",type:"post",data:e,otherData:{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:C},successText:"Avatar actualizado"},a.next=7,A(t);case 7:(r=a.sent)&&y(Object(b.a)({user:r.user})),y(Object(j.a)("updateAvatar",!1,{})),f(0);case 11:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();O.avatar&&a()}),[O.avatar]);return"V-"!==m.privilegio||(null===x||void 0===x||null===(a=x.sin_asignar)||void 0===a?void 0:a.change_avatar)?Object(v.jsx)(l.a,{mb:4,children:Object(v.jsx)(d.PerfilAvatarForm,{user:m,handleChange:function(a){y(Object(j.a)("updateAvatar",!1,Object(r.a)({},a.target.name,a.target.files[0])))},progress:n,loading:g})}):null}},295:function(a,e,t){"use strict";var r=t(7),n=(t(0),t(228)),s=t(366),i=t(62),c=t(242),o=t(205),l=t(165),d=t(1),u=Object(l.a)((function(a){return{progressLabel:{marginTop:5}}}));e.a=function(a){var e=a.loading,t=a.backDrop,l=void 0!==t&&t,p=a.children,j=function(a){var e=a.color,t=void 0===e?"primary":e,r=a.progressLabel,o=a.progressLoading,l=a.progress,p=u();return o&&l<=99?Object(d.jsxs)(n.a,{children:[Object(d.jsxs)(n.a,{position:"relative",display:"inline-flex",children:[Object(d.jsx)(s.a,{color:t,variant:"static",value:l}),Object(d.jsx)(n.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(d.jsxs)(i.a,{variant:"caption",component:"div",color:"textSecondary",children:[l,"%"]})})]}),r&&Object(d.jsx)(c.a,{container:!0,justify:"center",children:Object(d.jsx)("span",{className:p.progressLabel,children:r})})]}):Object(d.jsx)(s.a,{color:t,size:a.size})};return e&&!l?Object(d.jsx)(j,Object(r.a)({},a)):e&&l?Object(d.jsx)(o.a,{open:!0,style:{zIndex:200},children:Object(d.jsx)(j,Object(r.a)({},a))}):p}},302:function(a,e,t){"use strict";e.a=function(a){return{type:"UPDATE_DATA_USER",payload:a}}},349:function(a,e,t){"use strict";var r=t(2),n=t(3),s=t(0),i=(t(4),t(6)),c=t(8),o=t(17),l=s.forwardRef((function(a,e){var t=a.absolute,c=void 0!==t&&t,o=a.classes,l=a.className,d=a.component,u=void 0===d?"hr":d,p=a.flexItem,j=void 0!==p&&p,b=a.light,v=void 0!==b&&b,f=a.orientation,h=void 0===f?"horizontal":f,m=a.role,g=void 0===m?"hr"!==u?"separator":void 0:m,O=a.variant,x=void 0===O?"fullWidth":O,y=Object(n.a)(a,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return s.createElement(u,Object(r.a)({className:Object(i.a)(o.root,l,"fullWidth"!==x&&o[x],c&&o.absolute,j&&o.flexItem,v&&o.light,"vertical"===h&&o.vertical),role:g,ref:e},y))}));e.a=Object(c.a)((function(a){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:a.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(o.d)(a.palette.divider,.08)},middle:{marginLeft:a.spacing(2),marginRight:a.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(l)},987:function(a,e,t){"use strict";t.r(e),t.d(e,"PerfilAvatarForm",(function(){return A})),t.d(e,"default",(function(){return C}));var r=t(26),n=t(54),s=t.n(n),i=t(68),c=t(38),o=t(0),l=t(242),d=t(62),u=t(228),p=t(349),j=t(262),b=t(234),v=t(165),f=t(109),h=t(295),m=t(14),g=t(296),O=t(302),x=t(1),y=Object(v.a)((function(a){return{avatar:{backgroundColor:a.palette.secondary.main,color:a.palette.secondary.contrastText,height:a.spacing(10),width:a.spacing(10)}}}));function A(a){var e=a.user,t=a.loading,r=a.progress,n=a.handleChange,s=y();return Object(x.jsxs)(l.a,{container:!0,spacing:2,children:[Object(x.jsxs)(l.a,{item:!0,xs:12,children:[Object(x.jsx)(d.a,{variant:"h6",component:"span",className:"text__bold--semi",children:"Avatar del usuario"}),Object(x.jsx)(u.a,{mt:1,children:Object(x.jsx)(p.a,{})})]}),Object(x.jsxs)(l.a,{container:!0,alignItems:"center",spacing:2,item:!0,xs:12,children:[Object(x.jsx)(l.a,{item:!0,children:Object(x.jsx)(j.a,{alt:"Avatar User",src:e.avatar,className:s.avatar,children:e.name.substring(0,1).toUpperCase()})}),Object(x.jsxs)(l.a,{item:!0,children:[Object(x.jsx)("input",{id:"update_avatar_user",type:"file",style:{display:"none"},accept:"image/*",name:"avatar",onChange:n,value:""}),Object(x.jsx)("label",{htmlFor:"update_avatar_user",children:Object(x.jsx)(h.a,{loading:t,progressLoading:!0,progress:r,children:Object(x.jsx)(b.a,{variant:"contained",color:"primary",component:"span",disableElevation:!0,children:"Cambiar avatar"})})})]}),Object(x.jsx)(l.a,{item:!0,children:Object(x.jsx)(b.a,{onClick:function(){return n({target:{name:"avatar",files:["delete"]}})},variant:"outlined",disabled:t,children:"Quitar avatar"})})]})]})}function C(a){var e=a.id,t=Object(o.useState)(0),n=Object(c.a)(t,2),l=n[0],d=n[1],p=Object(m.d)((function(a){return{user:a.forms.showUser.data.user,loading:a.forms.updateAvatar.loading,data:a.forms.updateAvatar.data,userData:a.userData.user}})),j=p.user,b=p.loading,v=p.data,h=p.userData,y=Object(m.c)(),C=Object(f.a)().fetchData,D=Object(o.useCallback)((function(a){var e=Math.round(100*a.loaded/a.total);d(e)}),[]);Object(o.useEffect)((function(){var a=function(){var a=Object(i.a)(s.a.mark((function a(){var t,r,n;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return y(Object(g.a)("updateAvatar",!0)),t=new FormData,"delete"===v.avatar?t.append("delete_avatar",!0):t.append("avatar",v.avatar),t.append("_method","PUT"),r={url:"v1/user/".concat(e),type:"post",data:t,otherData:{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:D},successText:"Avatar actualizado"},a.next=7,C(r);case 7:(n=a.sent)&&(y(Object(g.a)("showUser",!1,n)),n.user.id===h.id&&y(Object(O.a)({user:n.user}))),y(Object(g.a)("updateAvatar",!1,{})),d(0);case 11:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();v.avatar&&a()}),[v.avatar]);return Object(x.jsx)(u.a,{mb:4,children:Object(x.jsx)(A,{user:j,handleChange:function(a){y(Object(g.a)("updateAvatar",!1,Object(r.a)({},a.target.name,a.target.files[0])))},progress:l,loading:b})})}}}]);
//# sourceMappingURL=59.6e029318.chunk.js.map