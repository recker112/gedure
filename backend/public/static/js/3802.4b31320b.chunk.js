"use strict";(self.webpackChunkfrontend_la_candelaria=self.webpackChunkfrontend_la_candelaria||[]).push([[3802],{23802:function(e,a,t){t.r(a),t.d(a,{default:function(){return H}});var n=t(1413),r=t(29439),i=t(72791),l=t(16871),o=t(91614),s=t(68870),d=t(61889),c=t(20068),u=t(13400),p=t(13239),x=t(67394),m=t(41286),b=t(3746),g=t(61134),h=t(81075),j=t(10703),f=t(20890),Z=t(24518),v=t(39709),y=t(99507),_=t(52791),P=t(48214),k=t(89190),C=t(53922),E=t(16030),w=t(80184);function z(){var e,a=(0,g.Gc)(),t=a.control,r=a.register,i=a.watch,l=(0,E.v9)((function(e){return e.requestStatus.editPost})),o=l.loading,s=l.progress;return(0,w.jsx)(j.Z,{className:"paper--padding",elevation:0,children:(0,w.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(d.ZP,{item:!0,xs:12,children:(0,w.jsx)(f.Z,{variant:"h6",align:"center",children:"Editar publicaci\xf3n"})}),(0,w.jsx)(d.ZP,{item:!0,xs:12,children:(0,w.jsx)(y.cl,{"data-tour":"gdPub__title",control:t,rules:{required:"* Campo requerido",minLength:{value:6,message:"Error: Demaciado corto"},maxLength:{value:100,message:"Error: Demaciado largo"}},name:"title",label:"T\xedtulo",helperText:"Ingrese un t\xedtulo para su publicaci\xf3n",size:"small",variant:"standard",fullWidth:!0,defaultValue:"",disabled:o})}),(0,w.jsx)(d.ZP,{container:!0,item:!0,xs:12,children:(0,w.jsx)(k.Z,{defaultValue:"",disabled:o})}),(0,w.jsx)(d.ZP,{item:!0,xs:12,children:(0,w.jsx)(f.Z,{variant:"h6",className:"text__bold--big text__opacity--semi",children:"Opcionales"})}),!i("delete_portada",!1)&&(0,w.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,w.jsx)("input",(0,n.Z)((0,n.Z)({},r("portada")),{},{accept:"image/*",style:{display:"none"},id:"button-file-portada",disabled:o,type:"file"})),(0,w.jsx)("label",{htmlFor:"button-file-portada",children:(0,w.jsx)(Z.Z,{color:"primary",disabled:o,variant:"contained",component:"span",disableElevation:!0,children:"Actualizar portada"})}),null!==(e=i("portada",[]))&&void 0!==e&&e.length?(0,w.jsx)(_.Z,{ml:2,fontSize:"body1.fontSize",component:"span",children:"Portada cargada"}):null]}),(0,w.jsx)(d.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,w.jsx)(P.H,{control:t,disabled:o,defaultValue:!1,name:"only_users",label:"Disponible solo para usuarios"})}),(0,w.jsx)(d.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,w.jsx)(P.H,{control:t,disabled:o,name:"delete_portada",label:"Eliminar portada de la publicaci\xf3n"})}),(0,w.jsx)(d.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,w.jsx)(P.H,{control:t,disabled:o,name:"delete_galery",label:"Eliminar Galeria de la publicaci\xf3n"})}),!i("delete_galery",!1)&&(0,w.jsx)(d.ZP,{item:!0,xs:12,children:(0,w.jsx)(C.Z,{label:"Actualizar galer\xeda de im\xe1genes, arrastre o de click para cargar im\xe1genes",defaultValue:[]})}),(0,w.jsx)(d.ZP,{container:!0,justifyContent:"flex-end",item:!0,xs:12,children:(0,w.jsx)(v.Z,{variant:"contained",type:"submit",loading:o,loadingIndicator:o&&s<99?"".concat(s,"%"):null,color:"primary",disableElevation:!0,children:"Actualizar"})})]})})}var S=t(13967),q=t(91526);function V(){var e=(0,S.Z)(),a=[{selector:"",content:function(e){var a=e.goTo;return(0,w.jsxs)("div",{children:[(0,w.jsx)(f.Z,{color:"primary",className:"text__bold--big",variant:"h5",children:"Editar"}),(0,w.jsxs)(f.Z,{variant:"body1",children:["En este apartado podr\xe1 ",(0,w.jsx)("strong",{children:"editar"})," publicaciones existentes en el sistema."]}),(0,w.jsx)(Z.Z,{size:"small",color:"primary",onClick:function(){a(6)},children:"Saltar tour"})]})},style:{backgroundColor:e.palette.background.paper}},{selector:'[data-tour="gdPub__preview"]',content:function(){return(0,w.jsxs)(f.Z,{variant:"body1",children:["Este bot\xf3n le permite ",(0,w.jsx)("strong",{children:"alternar"})," entre ",(0,w.jsx)("strong",{children:"visualizar"})," una vista previa y ",(0,w.jsx)("strong",{children:"editar"})," la publicaci\xf3n."]})},style:{backgroundColor:e.palette.background.paper}},{selector:'[data-tour="gdPub__title"]',content:function(){return(0,w.jsxs)(f.Z,{variant:"body1",children:["Este campo le permite ",(0,w.jsx)("strong",{children:"cambiar el t\xedtulo"})," de la publicaci\xf3n."]})},style:{backgroundColor:e.palette.background.paper}},{selector:'[data-tour="gdPub__tooltip"]',content:function(){return(0,w.jsxs)(f.Z,{variant:"body1",children:["Este apartado le permite ",(0,w.jsx)("strong",{children:"utilizar diferentes formatos"})," para poder estilizar los diferentes textos del contenido de la publicaci\xf3n."]})},style:{backgroundColor:e.palette.background.paper}},{selector:'[data-tour="gdPub__content"]',content:function(){return(0,w.jsxs)(f.Z,{variant:"body1",children:["Este campo le permite ",(0,w.jsx)("strong",{children:"cambiar el contenido"})," a utilizar en la publicaci\xf3n."]})},style:{backgroundColor:e.palette.background.paper}},{selector:"",content:function(){return(0,w.jsxs)(f.Z,{variant:"body1",children:["El ",(0,w.jsx)("strong",{children:"resto de los campos son opcionales"}),", con ellos puede realizar diversas acciones para terminar de completar su publicaci\xf3n."]})},style:{backgroundColor:e.palette.background.paper}},{selector:"",content:function(){return(0,w.jsx)(f.Z,{variant:"body1",children:"Con esto finaliza esta gu\xeda, navegue entre otras partes del sistema para encontrar m\xe1s gu\xedas."})},style:{backgroundColor:e.palette.background.paper}}];return(0,w.jsx)(q.Z,{select:"publicaciones_edit",steps:a})}var D=t(89736),I=t(79789),T=t(6728),A=t(13861),R={container:{flexGrow:1,paddingBottom:6,marginTop:{xs:"80px",sm:12}}};function G(e){var a=e.data,t=a.title,p=a.content,j=a.slug,f=a.only_users;document.title="Editar publicaciones - La Candelaria";var Z=(0,i.useState)(!1),v=(0,r.Z)(Z,2),y=v[0],_=v[1];(0,h.Z)();var P=(0,E.v9)((function(e){return e.requestStatus.editPost.loading})),k=(0,E.I0)(),C=(0,l.s0)(),S=(0,g.cI)({defaultValues:{title:t,markdown:p,only_users:Boolean(f)}});return(0,w.jsx)(g.RV,(0,n.Z)((0,n.Z)({},S),{},{children:(0,w.jsxs)("form",{onSubmit:S.handleSubmit((function(e){var a,t,n=new FormData;n.append("title",e.title),n.append("content",e.markdown),n.append("only_users",e.only_users),n.append("delete_portada",e.delete_portada),n.append("delete_galery",e.delete_galery),n.append("_method","PUT"),(null===(a=e.portada)||void 0===a?void 0:a[0])&&n.append("portada",e.portada[0]),(null===(t=e.galery)||void 0===t?void 0:t.length)&&e.galery.forEach((function(e){n.append("galery[]",e)})),k((0,A.d)({submitData:n,slug:j}))})),autoComplete:"off",children:[(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(s.Z,{mb:3,children:(0,w.jsxs)(d.ZP,{container:!0,justifyContent:"space-between",children:[(0,w.jsx)(c.Z,{title:"Volver",arrow:!0,children:(0,w.jsx)(u.Z,{disabled:P,onClick:function(){window.history.state&&window.history.state.idx>0?C(-1):C("/gedure/publicaciones")},"aria-label":"return",children:(0,w.jsx)(x.Z,{})})}),(0,w.jsx)(c.Z,{title:y?"Editar":"Visualizar",arrow:!0,children:(0,w.jsx)(u.Z,{disabled:P,onClick:S.handleSubmit((function(){_((function(e){return!e}))})),"data-tour":"gdPub__preview","aria-label":"preview",children:y?(0,w.jsx)(m.Z,{}):(0,w.jsx)(b.Z,{})})})]})}),!y&&(0,w.jsx)(z,{})]}),y&&(0,w.jsx)(D.Z,{})]})}))}function H(){var e=(0,l.UO)().slug,a=(0,E.v9)((function(e){return{loading:e.requestStatus.editPost.loadingRequest,data:e.requestStatus.editPost.dataRequest}})),t=a.loading,n=a.data,r=(0,E.I0)();return(0,i.useEffect)((function(){return r((0,I.d)(e)),function(){r((0,T.v2)({select:"editPost",input:"loadingRequest",value:!0}))}}),[]),t?(0,w.jsx)(s.Z,{component:"main",textAlign:"center",sx:R.container,children:(0,w.jsx)(p.Z,{})}):(0,w.jsxs)(s.Z,{component:"main",sx:R.container,children:[(0,w.jsx)(G,{data:n}),(0,w.jsx)(V,{})]})}}}]);
//# sourceMappingURL=3802.4b31320b.chunk.js.map