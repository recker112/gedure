"use strict";(self.webpackChunkfrontend_la_candelaria=self.webpackChunkfrontend_la_candelaria||[]).push([[3254],{76429:function(e,n,r){var o=r(1413),t=r(72791),a=r(55931),i=r(80184),s=t.forwardRef((function(e,n){return(0,i.jsx)(a.Z,(0,o.Z)({direction:"up",ref:n},e))}));n.Z=s},39481:function(e,n,r){r.d(n,{Z:function(){return h}});r(72791);var o=r(5574),t=r(65661),a=r(39157),i=r(51691),s=r(97123),c=r(24518),l=r(76429),d=r(16030),u=r(39709),f=r(80184);function h(e){var n=e.rdx1,r=e.rdx2,h=e.close,x=e.request,Z=e.children,p=(0,d.v9)((function(e){return e[n][r]})),v=p.open,m=p.loading,g=p.data,j=(0,d.I0)();return(0,f.jsxs)(o.Z,{open:v,TransitionComponent:l.Z,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",children:[(0,f.jsx)(t.Z,{children:"\xbfEst\xe1 seguro?"}),(0,f.jsx)(a.Z,{children:(0,f.jsx)(i.Z,{id:"confirm-dialog-description",children:Z(g)})}),(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(c.Z,{disabled:m,onClick:function(){j(h)},color:"inherit",children:"Cancelar"}),(0,f.jsx)(u.Z,{onClick:function(){j(x(g))},loading:m,color:"inherit",children:"Confirmar"})]})]})}},22604:function(e,n,r){function o(e){if("string"===typeof e){var n=e.substring(1,2),r=e.substring(0,1);return"".concat(r,"G"===n?" grado":" a\xf1o")}}r.d(n,{Z:function(){return o}})},81075:function(e,n,r){r.d(n,{Z:function(){return c}});var o=r(72791),t=r(86951),a=r(16030),i=r(80064),s=r(5016);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.messageTo200,r=void 0===n||n,c=e.messageTo400,l=void 0===c||c,d=e.message400,u=void 0!==d&&d,f=e.messageTo404,h=void 0===f||f,x=e.message404,Z=void 0===x?"Ruta URL no encontrada":x,p=e.messageTo422,v=void 0===p||p,m=e.message422,g=void 0===m?"Error al verificar los datos":m,j=(0,t.Ds)(),b=j.enqueueSnackbar,C=(0,a.v9)((function(e){return e.notistack})),w=C.notiText,k=C.notiStatus,y=C.notiVariant,z=(0,a.I0)();(0,o.useEffect)((function(){return 200===k||201===k?r&&b(w,{variant:y}):400===k?l&&b(u||w,{variant:"warning"}):401===k?(b("Sesi\xf3n expirada",{variant:"info"}),z((0,s.Rg)())):403===k?b("No tienes permisos para esta acci\xf3n",{variant:"error"}):404===k?h&&b(w||Z,{variant:"warning"}):422===k?v&&b(g,{variant:"error"}):429===k?(b("Demasiadas peticiones",{variant:"info"}),z((0,s.Rg)())):500===k?b("No se ha podido conectar con la base de datos",{variant:"error"}):"offline"===k&&b("Imposible conectarse con el servidor",{variant:"error"}),function(){z((0,i.ZN)())}}),[w,k,y,z,b,r,l,u,h,Z,v,g])}},63254:function(e,n,r){r.r(n),r.d(n,{default:function(){return U}});var o=r(1413),t=r(72791),a=r(16871),i=r(68870),s=r(26445),c=r(61889),l=r(20068),d=r(13400),u=r(13239),f=r(67394),h=r(43950),x=r(15861),Z=r(29439),p=r(87757),v=r.n(p),m=r(10703),g=r(39709),j=r(89885),b=r(73518),C=r(60383),w=r(31770),k=r(22604),y=r(16030),z=r(73800),V=r(82003),D=r(80184),M=["#2f80ED","#219653","#f2994A","#9B51E0","#EB5757","#c1c1c1"];function S(e){var n,r=e.id,o=e.lapso,a=e.fecha_humano,s=e.fecha_humano_modify,d=e.curso,u=e.created_at,f=e.updated_at,h=(0,t.useState)((n=M.length-1,Math.floor(Math.random()*Math.floor(n+1)))),p=(0,Z.Z)(h,1)[0],S=(0,t.useState)(!1),H=(0,Z.Z)(S,2),T=H[0],B=H[1],L=(0,y.v9)((function(e){return e.gdBVerForm.download.progress})),P=(0,y.I0)(),R=function(){var e=(0,x.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.next=3,P((0,V.bC)({id:r,curso:d,lapso:o}));case 3:B(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,D.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,D.jsx)(m.Z,{elevation:0,className:"paper--padding",children:(0,D.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,D.jsxs)(c.ZP,{container:!0,item:!0,xs:12,children:[(0,D.jsx)(c.ZP,{item:!0,xs:2,sm:3,md:3,children:(0,D.jsx)(j.Z,{style:{fontSize:60,color:M[p]}})}),(0,D.jsx)(c.ZP,{item:!0,xs:!0,children:(0,D.jsxs)(i.Z,{component:"span",style:{color:M[p]},fontSize:"h6.fontSize",fontWeight:600,children:[(0,k.Z)(d.curso)," ",d.seccion," - ",o,"\xb0 Lapso"]})}),(0,D.jsx)(c.ZP,{item:!0,xs:12,children:(0,D.jsx)(i.Z,{fontSize:"body1.fontSize",color:"text.disabled",fontWeight:600,children:u===f?"Subido ".concat(a):"Modificado ".concat(s)})})]}),(0,D.jsxs)(c.ZP,{container:!0,justifyContent:"flex-end",alignItems:"center",item:!0,xs:12,children:[(0,D.jsx)(l.Z,{title:"Eliminar",arrow:!0,children:(0,D.jsx)(g.Z,{onClick:function(){P((0,z.ks)({open:!0,data:{curso:d,lapso:o,id:r},confirm:"deleteBoleta"}))},color:"inherit",children:(0,D.jsx)(C.Z,{})})}),(0,D.jsx)(l.Z,{title:"Reemplazar",arrow:!0,children:(0,D.jsx)(g.Z,{onClick:function(){P((0,z.ks)({open:!0,data:{curso:d.curso,seccion:d.seccion,lapso:o,id:r},confirm:"replaceBoleta"}))},color:"inherit",children:(0,D.jsx)(w.Z,{})})}),(0,D.jsx)(l.Z,{title:"Descargar",arrow:!0,children:(0,D.jsx)(g.Z,{loading:T,loadingIndicator:T&&L<99?"".concat(L,"%"):null,onClick:R,color:"inherit",children:(0,D.jsx)(b.Z,{})})})]})]})})})}var H=r(81075),T=r(39481),B=r(5574),L=r(65661),P=r(39157),R=r(51691),_=r(24518),I=r(20890),E=r(97123),A=r(61134),F=r(76429);function N(){var e,n=(0,y.v9)((function(e){return e.gdBConfirm.replaceBoleta})),r=n.open,t=n.loading,a=n.progress,s=n.data,l=(0,y.I0)(),d=(0,A.cI)({mode:"onTouched",shouldUnregister:!0}),u=d.handleSubmit,f=d.register,h=d.watch,x=d.formState.errors;return(0,D.jsxs)(B.Z,{open:r,TransitionComponent:F.Z,children:[(0,D.jsx)(L.Z,{children:"Reemplazar boleta"}),(0,D.jsx)(P.Z,{children:(0,D.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,D.jsx)(c.ZP,{item:!0,xs:12,children:(0,D.jsxs)(R.Z,{children:["Est\xe1 a punto de reemplazar la boleta ",(0,D.jsxs)("strong",{children:[s.curso," ",s.seccion," ",s.lapso,"\xb0 Lapso"]}),". Tenga en cuenta que al reemplazar la boleta se borrar\xe1 la anterior."]})}),(0,D.jsxs)(c.ZP,{container:!0,alignItems:"center",item:!0,xs:12,children:[(0,D.jsx)("input",(0,o.Z)((0,o.Z)({id:"boleta-upload-file"},f("boleta",{required:"* Debe subir un archivo"})),{},{defaultValue:null,style:{display:"none"},accept:"application/pdf",type:"file"})),(0,D.jsx)("label",{htmlFor:"boleta-upload-file",children:(0,D.jsx)(_.Z,{variant:"contained",color:"secondary",component:"span",children:"Cargar archivo"})}),Boolean(x.boleta)&&(0,D.jsx)(i.Z,{ml:2,color:"#f44336",children:(0,D.jsx)(I.Z,{children:x.boleta.message})}),0!==((null===(e=h("boleta"))||void 0===e?void 0:e.length)||[]).length&&(0,D.jsx)(i.Z,{ml:2,children:(0,D.jsx)(I.Z,{children:"Archivo cargado"})})]})]})}),(0,D.jsxs)(E.Z,{children:[(0,D.jsx)(_.Z,{disabled:t,onClick:function(){l((0,z.ks)({open:!1,data:{},confirm:"replaceBoleta"}))},color:"inherit",children:"Cancelar"}),(0,D.jsx)(g.Z,{onClick:u((function(e){var n=new FormData;n.append("boleta",e.boleta[0]),n.append("_method","PUT"),l((0,z.s1)({id:s.id,submitData:n}))})),loading:t,loadingIndicator:t&&a<99?"".concat(a,"%"):null,variant:"text",color:"inherit",children:"Cargar"})]})]})}var q={container:{flexGrow:1,paddingBottom:6,marginTop:{xs:"80px",sm:12}}};function U(){var e,n;document.title="Boletas - La Candelaria";var r=(0,a.UO)().id;(0,H.Z)();var x=(0,y.v9)((function(e){return e.gdBVerForm.getData})),Z=x.loading,p=x.data,v=(0,y.I0)(),m=(0,a.s0)(),g=function(){v((0,V.kZ)({loading:!0,select:"getData"}))};return(0,t.useEffect)((function(){Z&&v((0,V.tw)(r))}),[Z]),(0,t.useEffect)((function(){return function(){v((0,V.kZ)({loading:!0,select:"getData"}))}}),[]),(0,D.jsx)(i.Z,{component:"main",sx:q.container,children:(0,D.jsxs)(s.Z,{children:[(0,D.jsx)(i.Z,{mb:3,children:(0,D.jsxs)(c.ZP,{container:!0,justifyContent:"space-between",children:[(0,D.jsx)(l.Z,{title:"Volver",arrow:!0,children:(0,D.jsx)(d.Z,{disabled:Z,onClick:function(){window.history.state&&window.history.state.idx>0?m(-1):m("/gedure/publicaciones")},"aria-label":"return",component:"span",children:(0,D.jsx)(f.Z,{})})}),(0,D.jsx)(l.Z,{title:"Recargar",arrow:!0,children:(0,D.jsx)(d.Z,{disabled:Z,onClick:g,"aria-label":"return",component:"span",children:(0,D.jsx)(h.Z,{})})})]})}),Z&&(0,D.jsx)(i.Z,{textAlign:"center",children:(0,D.jsx)(u.Z,{})}),!Z&&null!==(e=p.boletas)&&void 0!==e&&e.length?(0,D.jsxs)(t.Fragment,{children:[(0,D.jsxs)(i.Z,{fontSize:"h4.fontSize",mb:3,className:"text__bold--big",children:["Boletas subidas de ",p.user]}),(0,D.jsx)(c.ZP,{container:!0,spacing:2,children:p.boletas.map((function(e,n){return(0,D.jsx)(S,(0,o.Z)({},e),n)}))})]}):null,!Z&&!(null!==(n=p.boletas)&&void 0!==n&&n.length)&&(0,D.jsx)(i.Z,{textAlign:"center",fontSize:"body1.fontSize",children:"No hay boletas cargadas para este estudiante."}),(0,D.jsx)(T.Z,{rdx1:"gdBConfirm",rdx2:"deleteBoleta",close:(0,z.ks)({open:!1,data:{},confirm:"deleteBoleta"}),request:function(e){return(0,z.Yv)({submitData:e,refresh:g})},children:function(e){var n,r;return(0,D.jsxs)("span",{children:["Est\xe1 a punto de eliminar la boleta ",(0,D.jsxs)("strong",{children:[(0,k.Z)(null===(n=e.curso)||void 0===n?void 0:n.curso)," ",null===(r=e.curso)||void 0===r?void 0:r.seccion," - ",e.lapso,"\xb0 Lapso"]})," de ",(0,D.jsx)("strong",{children:p.user}),". Tenga en cuenta que esta acci\xf3n no se puede deshacer."]})}}),(0,D.jsx)(N,{})]})})}},67394:function(e,n,r){var o=r(95318);n.Z=void 0;var t=o(r(45649)),a=r(80184),i=(0,t.default)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");n.Z=i},60383:function(e,n,r){var o=r(95318);n.Z=void 0;var t=o(r(45649)),a=r(80184),i=(0,t.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");n.Z=i},73518:function(e,n,r){var o=r(95318);n.Z=void 0;var t=o(r(45649)),a=r(80184),i=(0,t.default)((0,a.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download");n.Z=i},43950:function(e,n,r){var o=r(95318);n.Z=void 0;var t=o(r(45649)),a=r(80184),i=(0,t.default)((0,a.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");n.Z=i},51691:function(e,n,r){r.d(n,{Z:function(){return Z}});var o=r(63366),t=r(87462),a=r(72791),i=r(12039),s=r(47630),c=r(93736),l=r(20890),d=r(19818);function u(e){return(0,d.Z)("MuiDialogContentText",e)}(0,r(22152).Z)("MuiDialogContentText",["root"]);var f=r(80184),h=["children"],x=(0,s.ZP)(l.Z,{shouldForwardProp:function(e){return(0,s.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,n){return n.root}})({}),Z=a.forwardRef((function(e,n){var r=(0,c.Z)({props:e,name:"MuiDialogContentText"}),a=(0,o.Z)(r,h),s=function(e){var n=e.classes,r=(0,i.Z)({root:["root"]},u,n);return(0,t.Z)({},n,r)}(a);return(0,f.jsx)(x,(0,t.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:a},r,{classes:s}))}))},65661:function(e,n,r){var o=r(87462),t=r(63366),a=r(72791),i=r(28182),s=r(12039),c=r(20890),l=r(47630),d=r(93736),u=r(17673),f=r(85090),h=r(80184),x=["className","id"],Z=(0,l.ZP)(c.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,n){return n.root}})({padding:"16px 24px",flex:"0 0 auto"}),p=a.forwardRef((function(e,n){var r=(0,d.Z)({props:e,name:"MuiDialogTitle"}),c=r.className,l=r.id,p=(0,t.Z)(r,x),v=r,m=function(e){var n=e.classes;return(0,s.Z)({root:["root"]},u.a,n)}(v),g=a.useContext(f.Z).titleId,j=void 0===g?l:g;return(0,h.jsx)(Z,(0,o.Z)({component:"h2",className:(0,i.Z)(m.root,c),ownerState:v,ref:n,variant:"h6",id:j},p))}));n.Z=p},31770:function(e,n,r){var o;n.Z=void 0;var t=(0,((o=r(71669))&&o.__esModule?o:{default:o}).default)("M14,3L12,1H4A2,2 0 0,0 2,3V15A2,2 0 0,0 4,17H11V19L15,16L11,13V15H4V3H14M21,10V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19V12H14V7H8V13H6V7A2,2 0 0,1 8,5H16L21,10Z","FileReplaceOutline");n.Z=t}}]);
//# sourceMappingURL=3254.44e71074.chunk.js.map