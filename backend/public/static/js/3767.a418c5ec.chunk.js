"use strict";(self.webpackChunkfrontend_la_candelaria=self.webpackChunkfrontend_la_candelaria||[]).push([[3767],{23767:function(e,n,a){a.r(n),a.d(n,{default:function(){return se}});var r=a(72791),t=a(68870),s=a(91614),o=a(61889),l=a(24518),i=a(81075),c=a(1413),d=a(23786),u=a(5574),h=a(65661),x=a(39157),p=a(51691),b=a(97123),j=a(61134),m=a(76429),f=a(39709),g=a(37369),Z=a(16030),v=a(20310),C=a(6728),k=a(37364),y=a(80184);function _(){var e=(0,Z.v9)((function(e){return e.requestStatus.deleteMassiveBoletas})),n=e.open,a=e.loading,t=e.data,s=(0,Z.I0)(),i=(0,j.cI)({mode:"onTouched",shouldUnregister:!0}),_=i.handleSubmit,w=i.control,B=g.wp.map((0,r.useCallback)((function(e,n){return(0,y.jsx)(d.Z,{value:e.value,children:e.label},n)}),[]));return(0,y.jsxs)(u.Z,{open:n,TransitionComponent:m.Z,children:[(0,y.jsx)(h.Z,{children:"Eliminar boletas"}),(0,y.jsx)(x.Z,{children:(0,y.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(o.ZP,{item:!0,xs:12,children:(0,y.jsxs)(p.Z,{children:["Ha seleccionado a ",(0,y.jsx)("strong",{children:t.length})," estudiante(s) para eliminar su boleta de su curso actual, seleccione el lapso de la boleta a borrar:"]})}),(0,y.jsx)(o.ZP,{container:!0,alignItems:"center",item:!0,xs:12,children:(0,y.jsxs)(v.g,{name:"lapso",label:"Lapso",control:w,disabled:a,size:"small",variant:"standard",fullWidth:!0,children:[(0,y.jsx)(d.Z,{value:"",children:(0,y.jsx)("em",{children:"Ninguno"})}),B]})})]})}),(0,y.jsxs)(b.Z,{children:[(0,y.jsx)(l.Z,{disabled:a,onClick:function(){s((0,C.CI)({open:!1,data:{},select:"deleteMassiveBoletas"}))},color:"inherit",children:"Cancelar"}),(0,y.jsx)(f.Z,{loading:a,onClick:_((function(e){s((0,k.Z)((0,c.Z)((0,c.Z)({},e),{},{ids:t,_method:"PUT"})))})),color:"inherit",children:"Eliminar"})]})]})}var w=a(43504),B=a(50533),P=a(20890),z=a(15081);function I(){var e,n=(0,Z.v9)((function(e){return e.requestStatus.uploadBoleta})),a=n.open,s=n.loading,i=n.progress,k=(0,Z.I0)(),_=(0,j.cI)({mode:"onTouched",shouldUnregister:!0}),I=_.handleSubmit,S=_.register,T=_.control,L=_.watch,D=_.formState.errors,E=g.wp.map((0,r.useCallback)((function(e,n){return(0,y.jsx)(d.Z,{value:e.value,children:e.label},n)}),[]));return(0,y.jsxs)(u.Z,{open:a,TransitionComponent:m.Z,children:[(0,y.jsx)(h.Z,{children:"Cargar boletas"}),(0,y.jsx)(x.Z,{children:(0,y.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(o.ZP,{item:!0,xs:12,children:(0,y.jsxs)(p.Z,{children:["Recuerde que debe comprimir en ",(0,y.jsx)("strong",{children:"ZIP"})," todas las boletas que desee cargar. Para ",(0,y.jsx)("strong",{children:"m\xe1s informaci\xf3n"})," de c\xf3mo cargar boletas de click ",(0,y.jsx)(B.Z,{component:w.OL,to:"/gedure/preguntas-frecuentes",children:"aqu\xed"}),"."]})}),(0,y.jsxs)(o.ZP,{container:!0,alignItems:"center",item:!0,xs:12,children:[(0,y.jsx)("input",(0,c.Z)((0,c.Z)({id:"boletas-upload-file"},S("boletas",{required:"* Debe subir un archivo"})),{},{defaultValue:null,style:{display:"none"},accept:"application/zip",type:"file"})),(0,y.jsx)("label",{htmlFor:"boletas-upload-file",children:(0,y.jsx)(l.Z,{variant:"contained",color:Boolean(D.boletas)?"error":"secondary",component:"span",children:"Cargar archivo"})}),Boolean(D.boletas)&&(0,y.jsx)(t.Z,{ml:2,color:"#f44336",children:(0,y.jsx)(P.Z,{children:D.boletas.message})}),0!==((null===(e=L("boletas"))||void 0===e?void 0:e.length)||[]).length&&(0,y.jsx)(t.Z,{ml:2,children:(0,y.jsx)(P.Z,{children:"Archivo cargado"})})]}),(0,y.jsx)(o.ZP,{item:!0,xs:12,children:(0,y.jsxs)(v.g,{name:"lapso",label:"Lapso",control:T,disabled:s,size:"small",variant:"standard",fullWidth:!0,children:[(0,y.jsx)(d.Z,{value:"",children:(0,y.jsx)("em",{children:"Ninguno"})}),E]})})]})}),(0,y.jsxs)(b.Z,{children:[(0,y.jsx)(l.Z,{disabled:s,onClick:function(){k((0,C.CI)({select:"uploadBoleta",open:!1}))},color:"inherit",children:"Cancelar"}),(0,y.jsx)(f.Z,{onClick:I((function(e){var n=new FormData;n.append("boletas",e.boletas[0]),n.append("lapso",e.lapso),k((0,z.B)({submitData:n}))})),loading:s,loadingIndicator:s&&i<99?"".concat(i,"%"):null,variant:"text",color:"inherit",children:"Cargar"})]})]})}var S=a(37762),T=a(16871),L=a(93044),D=a(20068),E=a(13400),F=a(55037),q=a(60383),V=a(70825),H=a(93433),M=a(74165),N=a(15861),U=a(84697),A=a(73974),R=a(10703),O=a(84395),G=a(34663),W=a(91903),J=a(29823),Y=a(86753),K=a(6122),Q=a(15728);function X(){var e=(0,Z.v9)((function(e){return e.tables.boletas})),n=e.filterBox,a=e.filters,r=e.countFilters,l=(0,Z.I0)(),i=(0,j.cI)({defaultValues:a}),c=i.control,d=i.handleSubmit,u=i.reset,h=function(){var e=(0,N.Z)((0,M.Z)().mark((function e(n){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l((0,Q.rr)({select:"boletas",data:n}));case 2:l((0,Q.es)({open:!1,select:"boletas"}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=[{value:"",label:"Todos"}].concat((0,H.Z)(g.Y5)),p=[{value:"",label:"Todos"}].concat((0,H.Z)(g.RJ));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(U.Z,{badgeContent:r,color:"primary",children:(0,y.jsx)(D.Z,{title:"Filtrador",arrow:!0,children:(0,y.jsx)(E.Z,{color:"inherit","data-tour":"gdBol__filters",onClick:function(){l((0,Q.es)({open:!0,select:"boletas"}))},children:(0,y.jsx)(W.Z,{})})})}),(0,y.jsx)(A.ZP,{open:n,anchor:"bottom",children:(0,y.jsxs)(R.Z,{sx:{height:"100vh"},children:[(0,y.jsx)(O.Z,{enableColorOnDark:!0,position:"static",elevation:0,children:(0,y.jsxs)(G.Z,{children:[(0,y.jsx)(P.Z,{variant:"h5",sx:{flexGrow:1},children:"Filtrador"}),(0,y.jsx)(D.Z,{title:"Reiniciar",arrow:!0,children:(0,y.jsx)(E.Z,{onClick:function(){u({curso:"",seccion:""})},children:(0,y.jsx)(Y.Z,{})})}),(0,y.jsx)(D.Z,{title:"Cerrar",arrow:!0,children:(0,y.jsx)(E.Z,{onClick:d(h),children:(0,y.jsx)(J.Z,{})})})]})}),(0,y.jsx)(s.Z,{children:(0,y.jsx)(t.Z,{my:2,children:(0,y.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(o.ZP,{item:!0,xs:12,children:(0,y.jsx)(K.V,{label:"Curso",name:"curso",defaultValue:a.curso,radioList:x,rules:{},control:c,row:!0})}),(0,y.jsx)(o.ZP,{item:!0,xs:12,children:(0,y.jsx)(K.V,{label:"Secci\xf3n",name:"seccion",defaultValue:a.seccion,radioList:p,rules:{},control:c,row:!0})})]})})})]})})]})}var $=a(71399);function ee(){var e=(0,T.s0)(),n=(0,Z.v9)((function(e){return{dataR:e.tables.boletas.tableData.data,loading:e.tables.boletas.tableData.loading,pageSize:e.tables.boletas.tableData.pageSize,pageCount:e.tables.boletas.tableData.pageCount,filters:e.tables.boletas.filters,permissions:e.auth.permissions}})),a=n.dataR,t=n.loading,s=n.pageSize,o=n.pageCount,l=n.filters,i=n.permissions,d=l.curso,u=l.seccion,h=i.administrar.boletas_destroy,x=(0,Z.I0)(),p=(0,r.useMemo)((function(){return[{Header:"Avatar",accessor:"avatar",Cell:function(e){var n=e.cell.row.original,a=n.avatar,r=n.name;return(0,y.jsx)(L.Z,{sx:{backgroundColor:"secondary.main",color:"secondary.contrastText"},src:a,alt:"Avatar User de ".concat(r),children:r.substring(0,1).toUpperCase()})}},{Header:"Usuario",accessor:"username",Cell:function(e){var n=e.cell.row.original,a=n.privilegio,t=n.username,s=n.n_lista;return d&&u?(0,y.jsxs)(r.Fragment,{children:[(0,y.jsx)("div",{children:a+t}),(0,y.jsxs)("div",{children:["N\xb0 lista ",s]})]}):"".concat(a).concat(t)}},{Header:"Nombre",accessor:"name"},{Header:"Boletas cargadas",accessor:"boletas_count"},{id:"options",Header:"Opciones",accessor:"options",Cell:function(n){var a=n.cell.row.original.id;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(D.Z,{title:"Ver boletas",arrow:!0,children:(0,y.jsx)(E.Z,{onClick:function(){e("ver/".concat(a))},children:(0,y.jsx)(F.Z,{})})})})}}]}),[d,u]),b=(0,r.useMemo)((function(){return a}),[a]);(0,r.useEffect)((function(){var e=null;return t&&(e=x((0,$.z)())),function(){t&&e.abort()}}),[t]),(0,r.useEffect)((function(){return function(){x((0,Q.AF)({select:"boletas"}))}}),[]);return(0,y.jsx)(V.Z,{title:"Lista de noticias",data:b,columns:p,pageCountData:o,pageSizeData:s,loading:t,handleGlobalFilter:function(e){x((0,Q.qP)({search:e||"",select:"boletas"}))},handleChange:function(e){x((0,Q.ai)((0,c.Z)((0,c.Z)({},e),{},{select:"boletas"})))},refresh:function(){x((0,Q.bi)({select:"boletas"}))},filter:(0,y.jsx)(X,{}),massiveOptions:function(e){return(0,y.jsx)(D.Z,{title:"Eliminar boletas",arrow:!0,children:(0,y.jsx)(E.Z,{onClick:function(){var n,a=0,r=[],t=(0,S.Z)(e);try{for(t.s();!(n=t.n()).done;){var s=n.value;r[a]=s.id,a++}}catch(o){t.e(o)}finally{t.f()}x((0,C.CI)({open:!0,data:r,select:"deleteMassiveBoletas"}))},disabled:!h,children:(0,y.jsx)(q.Z,{})})})}})}var ne=a(13967),ae=a(91526);function re(){var e=(0,ne.Z)(),n=[{selector:"",content:function(e){var n=e.goTo;return(0,y.jsxs)("div",{children:[(0,y.jsx)(P.Z,{color:"primary",className:"text__bold--big",variant:"h5",children:"Boletas"}),(0,y.jsxs)(P.Z,{variant:"body1",children:["En esta secci\xf3n podr\xe1 ",(0,y.jsx)("strong",{children:"cargar, ver, editar, y eliminar"})," las boletas de distintos estudiantes."]}),(0,y.jsx)(l.Z,{size:"small",color:"primary",onClick:function(){n(6)},children:"Saltar tour"})]})},style:{backgroundColor:e.palette.background.paper}},{selector:'[data-tour="gdBol__upload"]',content:function(){return(0,y.jsxs)(P.Z,{variant:"body1",children:["Este bot\xf3n le permite ",(0,y.jsx)("strong",{children:"cargar boletas"})," a todos los estudiantes existentes en el sistema."]})},style:{backgroundColor:e.palette.background.paper}},{selector:'[data-tour="gdBol__filters"]',content:function(){return(0,y.jsx)(P.Z,{variant:"body1",children:"Este bot\xf3n le permitir\xe1 filtrar a los estudiantes que desea ver."})},style:{backgroundColor:e.palette.background.paper}},{selector:'[data-tour="gdTable__refresh"]',content:function(){return(0,y.jsxs)(P.Z,{variant:"body1",children:["Este bot\xf3n le permite ",(0,y.jsx)("strong",{children:"refrescar los datos"})," mostrados en la tabla."]})},style:{backgroundColor:e.palette.background.paper}},{selector:'[data-tour="gdTable__massive"]',content:function(){return(0,y.jsxs)(P.Z,{variant:"body1",children:["Este bot\xf3n le permite usar las ",(0,y.jsx)("strong",{children:"opciones masivas"}),", con lo cual podr\xe1 ",(0,y.jsx)("strong",{children:"seleccionar varios estudiantes"})," y realizar distintas acciones como: ",(0,y.jsx)("strong",{children:"Eliminar boletas"}),"."]})},style:{backgroundColor:e.palette.background.paper}},{selector:'[data-tour="gdTable__search"]',content:function(){return(0,y.jsxs)(P.Z,{variant:"body1",children:["Aqu\xed podra buscar usuarios por por su ",(0,y.jsx)("strong",{children:"usuario"})," o ",(0,y.jsx)("strong",{children:"nombre"}),"."]})},style:{backgroundColor:e.palette.background.paper}},{selector:"",content:function(){return(0,y.jsx)(P.Z,{variant:"body1",children:"Con esto finaliza esta gu\xeda, navegue entre otras partes del sistema para encontrar m\xe1s gu\xedas."})},style:{backgroundColor:e.palette.background.paper}}];return(0,y.jsx)(ae.Z,{select:"boletas_admin",steps:n})}var te={container:{flexGrow:1,paddingBottom:6,marginTop:{xs:"80px",sm:12}}};function se(){(0,i.Z)();var e=(0,Z.v9)((function(e){return{administrar:e.auth.permissions.administrar,count_notify:e.auth.notify.count}})),n=e.administrar.boletas_upload,a=e.count_notify,r=(0,Z.I0)();document.title=a>0?"(".concat(a,") Boletas - La Candelaria"):"Boletas - La Candelaria";return(0,y.jsxs)(t.Z,{component:"main",sx:te.container,children:[(0,y.jsxs)(s.Z,{children:[(0,y.jsx)(t.Z,{fontSize:"h4.fontSize",mb:3,className:"text__bold--big",children:"Boletas"}),(0,y.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(o.ZP,{container:!0,justifyContent:"flex-end",item:!0,xs:12,children:(0,y.jsx)(l.Z,{variant:"contained","data-tour":"gdBol__upload",onClick:function(){r((0,C.CI)({select:"uploadBoleta",open:!0}))},disabled:!n,children:"Cargar boletas"})}),(0,y.jsx)(o.ZP,{item:!0,xs:12,children:(0,y.jsx)(ee,{})})]}),(0,y.jsx)(_,{}),(0,y.jsx)(I,{})]}),(0,y.jsx)(re,{})]})}},60383:function(e,n,a){var r=a(64836);n.Z=void 0;var t=r(a(45649)),s=a(80184),o=(0,t.default)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");n.Z=o}}]);
//# sourceMappingURL=3767.a418c5ec.chunk.js.map