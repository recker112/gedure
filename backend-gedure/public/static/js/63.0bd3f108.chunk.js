(this["webpackJsonpfrontend-la-candelaria"]=this["webpackJsonpfrontend-la-candelaria"]||[]).push([[63],{263:function(e,a,t){"use strict";var r=t(6),n=(t(0),t(355)),i=t(333),c=t(60),s=t(226),o=t(188),l=t(152),d=t(1),u=Object(l.a)((function(e){return{progressLabel:{marginTop:5}}}));a.a=function(e){var a=e.loading,t=e.backDrop,l=void 0!==t&&t,j=e.children,b=function(e){var a=e.color,t=void 0===a?"primary":a,r=e.progressLabel,o=e.progressLoading,l=e.progress,j=u();return o&&l<=99?Object(d.jsxs)(n.a,{children:[Object(d.jsxs)(n.a,{position:"relative",display:"inline-flex",children:[Object(d.jsx)(i.a,{color:t,variant:"static",value:l}),Object(d.jsx)(n.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(d.jsxs)(c.a,{variant:"caption",component:"div",color:"textSecondary",children:[l,"%"]})})]}),r&&Object(d.jsx)(s.a,{container:!0,justify:"center",children:Object(d.jsx)("span",{className:j.progressLabel,children:r})})]}):Object(d.jsx)(i.a,{color:t})};return a&&!l?Object(d.jsx)(b,Object(r.a)({},e)):a&&l?Object(d.jsx)(o.a,{open:!0,style:{zIndex:200},children:Object(d.jsx)(b,Object(r.a)({},e))}):j}},268:function(e,a,t){"use strict";a.a=function(e){return{type:"UPDATE_DATA_USER",payload:e}}},334:function(e,a,t){"use strict";var r=t(2),n=t(3),i=t(0),c=(t(4),t(5)),s=t(7),o=t(28),l=i.forwardRef((function(e,a){var t=e.absolute,s=void 0!==t&&t,o=e.classes,l=e.className,d=e.component,u=void 0===d?"hr":d,j=e.flexItem,b=void 0!==j&&j,p=e.light,v=void 0!==p&&p,h=e.orientation,f=void 0===h?"horizontal":h,g=e.role,m=void 0===g?"hr"!==u?"separator":void 0:g,O=e.variant,x=void 0===O?"fullWidth":O,y=Object(n.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return i.createElement(u,Object(r.a)({className:Object(c.a)(o.root,l,"fullWidth"!==x&&o[x],s&&o.absolute,b&&o.flexItem,v&&o.light,"vertical"===f&&o.vertical),role:m,ref:a},y))}));a.a=Object(s.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(o.d)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(l)},985:function(e,a,t){"use strict";t.r(a),t.d(a,"PerfilAvatarForm",(function(){return A})),t.d(a,"default",(function(){return C}));var r=t(42),n=t(48),i=t.n(n),c=t(67),s=t(35),o=t(0),l=t(226),d=t(60),u=t(355),j=t(334),b=t(246),p=t(488),v=t(152),h=t(105),f=t(263),g=t(12),m=t(264),O=t(268),x=t(1),y=Object(v.a)((function(e){return{avatar:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText,height:e.spacing(10),width:e.spacing(10)}}}));function A(e){var a=e.user,t=e.loading,r=e.progress,n=e.handleChange,i=y();return Object(x.jsxs)(l.a,{container:!0,spacing:2,children:[Object(x.jsxs)(l.a,{item:!0,xs:12,children:[Object(x.jsx)(d.a,{variant:"h6",component:"span",className:"text__bold--semi",children:"Avatar del usuario"}),Object(x.jsx)(u.a,{mt:1,children:Object(x.jsx)(j.a,{})})]}),Object(x.jsxs)(l.a,{container:!0,alignItems:"center",spacing:2,item:!0,xs:12,children:[Object(x.jsx)(l.a,{item:!0,children:Object(x.jsx)(b.a,{alt:"Avatar User",src:a.avatar,className:i.avatar,children:a.name.substring(0,1).toUpperCase()})}),Object(x.jsxs)(l.a,{item:!0,children:[Object(x.jsx)("input",{id:"update_avatar_user",type:"file",style:{display:"none"},accept:"image/*",name:"avatar",onChange:n,value:""}),Object(x.jsx)("label",{htmlFor:"update_avatar_user",children:Object(x.jsx)(f.a,{loading:t,progressLoading:!0,progress:r,children:Object(x.jsx)(p.a,{variant:"contained",color:"primary",component:"span",disableElevation:!0,children:"Cambiar avatar"})})})]}),Object(x.jsx)(l.a,{item:!0,children:Object(x.jsx)(p.a,{onClick:function(){return n({target:{name:"avatar",files:["delete"]}})},variant:"outlined",disabled:t,children:"Quitar avatar"})})]})]})}function C(e){var a=e.id,t=Object(o.useState)(0),n=Object(s.a)(t,2),l=n[0],d=n[1],j=Object(g.d)((function(e){return{user:e.forms.showUser.data.user,loading:e.forms.updateAvatar.loading,data:e.forms.updateAvatar.data,userData:e.userData.user}})),b=j.user,p=j.loading,v=j.data,f=j.userData,y=Object(g.c)(),C=Object(h.a)().fetchData,w=Object(o.useCallback)((function(e){var a=Math.round(100*e.loaded/e.total);d(a)}),[]);Object(o.useEffect)((function(){var e=function(){var e=Object(c.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(Object(m.a)("updateAvatar",!0)),t=new FormData,"delete"===v.avatar?t.append("delete_avatar",!0):t.append("avatar",v.avatar),t.append("_method","PUT"),r={url:"v1/user/".concat(a),type:"post",data:t,otherData:{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:w},successText:"Avatar actualizado"},e.next=7,C(r);case 7:(n=e.sent)&&(y(Object(m.a)("showUser",!1,n)),n.user.id===f.id&&y(Object(O.a)({user:n.user}))),y(Object(m.a)("updateAvatar",!1,{})),d(0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();v.avatar&&e()}),[v.avatar]);return Object(x.jsx)(u.a,{mb:4,children:Object(x.jsx)(A,{user:b,handleChange:function(e){y(Object(m.a)("updateAvatar",!1,Object(r.a)({},e.target.name,e.target.files[0])))},progress:l,loading:p})})}}}]);
//# sourceMappingURL=63.0bd3f108.chunk.js.map